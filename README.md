#  Mini Call Detail Record (CDR) Processing & Reporting System

This repository contains the source code for a backend service that processes and stores telecommunication Call Detail Records (CDRs). It is built using Spring Boot and uses PostgreSQL as the underlying database. The application can be easily deployed using Docker and Docker Compose.


---

## Technologies Used

- Java 21
- Spring Boot 3.5.4
- Hibernate ORM (JPA)
- PostgreSQL 14
- Docker & Docker Compose
- Lombok
- Postman
- Swagger
- Maven

---

##  Installation & Running

### _Prerequisites_

- Java 21
- Maven
- Docker & Docker Compose

### _Build the Application_

```bash
# Build the project without running tests
mvn clean package -DskipTests

# Then start the application using Docker Compose
docker-compose up -d --build

# To follow application logs in real-time
docker logs -f minicdr-app
```
---

## Interacting with the API (Swagger / Postman)

The application runs at:  
- `http://localhost:8080`

You can interact with the REST API using:

-  **Swagger UI** â†’ [http://localhost:8080/swagger-ui/index.html](http://localhost:8080/swagger-ui/index.html)
-  **Postman**

---

## Example API Endpoints

### ðŸ”¹ _1. Create a Single CDR Record_

**Endpoint:** `POST /api/cdrs`  
**Headers:** `Content-Type: application/json`

```json
{
  "startTime": "2025-08-04T13:00:00",
  "endTime": "2025-08-04T13:10:00",
  "imsi": "123456789012345",
  "imei": "356789012345678",
  "cellId": 123,
  "lacId": 456,
  "anumber": "905551112233",
  "bnumber": "905559998877",
  "setupDuration": 3,
  "conversationDuration": 120,
  "direction": "MO",
  "result": "SUCCESS"
}
```
 **_Note:_**  
The `id` field is automatically generated by the system and incremented for each new CDR record.

### ðŸ”¹ _2. Add Multiple Records (Batch)_

**Endpoint:** `POST /api/cdrs/batch`  
**Body:** Array of multiple CDRs in the same format.

```json
[
  {
    "startTime": "2025-08-04T13:00:00",
    "endTime": "2025-08-04T13:10:00",
    "imsi": "123456789012345",
    "imei": "356789012345678",
    "cellId": 987,
    "lacId": 654,
    "anumber": "905551112233",
    "bnumber": "905559998877",
    "setupDuration": 3,
    "conversationDuration": 120,
    "direction": "MO",
    "result": "FAIL"
  },
  {
    "startTime": "2025-08-04T14:00:00",
    "endTime": "2025-08-04T14:05:00",
    "imsi": "543210987654321",
    "imei": "987654321098765",
    "cellId": 105,
    "lacId": 696,
    "anumber": "905551119999",
    "bnumber": "905559990000",
    "setupDuration": 2,
    "conversationDuration": 300,
    "direction": "MT",
    "result": "SUCCESS"
  }
]
```
### ðŸ”¹ _3. Get All CDRs_

**Endpoint:** `GET /api/cdrs`  
Returns all stored CDR records.

---

### ðŸ”¹ _4. Get Records by Caller Number_

**Endpoint:** `GET /api/cdrs/by-caller/{number}`  
Returns records where `aNumber` matches the given number.

**Example:**

```http
GET /api/cdrs/by-caller/905551112233
```

## Architecture Notes

- **Controller Layer:** Handles API requests and maps to services.
- **Service Layer:** Contains business logic.
- **Repository Layer:** Manages persistence with Spring Data JPA.
- **DTOs:** Used for request/response separation from Entity.
- **Enum Classes:** Represent _**Direction**_ and _**Result**_ values.
- **Aspect:** Can be added for logging or validation cross-cutting concerns.
- **application.yml:** Centralized Spring Boot configuration.
- **docker-compose.yml:** Defines and runs multi-container Docker applications.

---

## Author

- GitHub: [@bsinemcetiner](https://github.com/bsinemcetiner)

